"use strict";(self.webpackChunk_feature_sliced_documentation=self.webpackChunk_feature_sliced_documentation||[]).push([[3649],{4137:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),c=p(n),d=r,k=c["".concat(s,".").concat(d)]||c[d]||u[d]||i;return n?a.createElement(k,l(l({ref:t},m),{},{components:n})):a.createElement(k,l({ref:t},m))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2921:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(4137));const i={sidebar_position:2},l="Segment",o={unversionedId:"reference/units/segments",id:"reference/units/segments",title:"Segment",description:"The third level of application partitioning, according to the purpose of the module in the code and implementation",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/reference/units/segments.md",sourceDirName:"reference/units",slug:"/reference/units/segments",permalink:"/docs/reference/units/segments",draft:!1,editUrl:"https://github.com/feature-sliced/documentation/edit/master/i18n/en/docusaurus-plugin-content-docs/current/reference/units/segments.md",tags:[],version:"current",lastUpdatedAt:1665349132,formattedLastUpdatedAt:"Oct 9, 2022",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"referenceSidebar",previous:{title:"Shared",permalink:"/docs/reference/units/layers/shared"},next:{title:"Decomposition of app",permalink:"/docs/reference/units/decomposition"}},s={},p=[{value:"General rules",id:"general-rules",level:2},{value:"<code>ui</code>",id:"ui",level:2},{value:"Examples",id:"examples",level:3},{value:"Complex UI for the layer",id:"complex-ui-for-the-layer",level:4},{value:"<code>model</code>",id:"model",level:2},{value:"<code>lib</code>",id:"lib",level:2},{value:"<code>api</code>",id:"api",level:2},{value:"Examples",id:"examples-1",level:3},{value:"<code>config</code>",id:"config",level:2},{value:"Examples",id:"examples-2",level:3},{value:"Using environment variables",id:"using-environment-variables",level:4},{value:"See also",id:"see-also",level:2}],m={toc:p};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"segment"},"Segment"),(0,r.kt)("p",null,"The third level of application partitioning, according to the ",(0,r.kt)("strong",{parentName:"p"},"purpose of the module in the code and implementation")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"{layer}/\n    \u251c\u2500\u2500 {slice}/\n    |   \u251c\u2500\u2500 ui/                     # UI-logic (components, ui-widgets, ...)\n    |   \u251c\u2500\u2500 model/                  # Business logic (store, actions, effects, reducers, ...)\n    |   \u251c\u2500\u2500 lib/                    # Infrastructure logic (utils/helpers)\n    |   \u251c\u2500\u2500 config/                 # Application configuration (env-vars, ...)\n    |   \u2514\u2500\u2500 api/                    # Logic of API requests (api instances, requests, ...)\n")),(0,r.kt)("h2",{id:"general-rules"},"General rules"),(0,r.kt)("p",null,"Each of the above segments represents the levels of abstractions that are familiar to us when developing software."),(0,r.kt)("p",null,"Each of the segments is responsible for its own scope, but all together - ",(0,r.kt)("strong",{parentName:"p"},"they form a single image of this slice and its logic"),", specifically:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"its visual display (ui)"),(0,r.kt)("li",{parentName:"ul"},"its business logic (model)"),(0,r.kt)("li",{parentName:"ul"},"its auxiliary modules (lib)")),(0,r.kt)("p",null,"Also, in rare cases, affecting:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"its configuration (config)"),(0,r.kt)("li",{parentName:"ul"},"its logic for working with API requests (api)")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Each segment can be either a file or a directory")," - it depends on the complexity of the slice being implemented"),(0,r.kt)("p",{parentName:"admonition"},"That is, such options are also quite acceptable:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"features/wallet/add-funds\n    \u251c\u2500\u2500 ui.tsx\n    \u251c\u2500\u2500 model.ts\n    \u2514\u2500\u2500 index.ts\n")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pages/home/\n    \u251c\u2500\u2500 index.tsx\n    \u2514\u2500\u2500 style.module.scss\n"))),(0,r.kt)("h2",{id:"ui"},(0,r.kt)("inlineCode",{parentName:"h2"},"ui")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"UI representation of the module")),(0,r.kt)("p",null,"It can contain inside:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Components of your UI framework (React, Vue, Angular, ...)"),(0,r.kt)("li",{parentName:"ul"},"Canvas-Widgets"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"(any other ui view modules)"))),(0,r.kt)("h3",{id:"examples"},"Examples"),(0,r.kt)("h4",{id:"complex-ui-for-the-layer"},"Complex UI for the layer"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"{layer}/{slice}/\n    \u251c\u2500\u2500 ui/\n    |   \u251c\u2500\u2500 toolbar/\n    |   |     \u251c\u2500\u2500 title/\n    |   |     \u2514\u2500\u2500 actions/\n    |   \u251c\u2500\u2500 content/\n    |   |     \u251c\u2500\u2500 sort/\n    |   |     \u2514\u2500\u2500 table/\n    |   \u2514\u2500\u2500 index.tsx/\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title={layer}/{slice}/ui/index.tsx",title:"{layer}/{slice}/ui/index.tsx"},'import Toolbar from "./toolbar";\nimport Content from "./content";\nimport styles from "./styles.module.scss";\n\nexport const SomeForm = () => (\n    <Layout className={styles.root}>\n      <Toolbar className={styles.toolbar} />  \n      <Content className={styles.content} />\n    </Layout>\n)\n')),(0,r.kt)("h2",{id:"model"},(0,r.kt)("inlineCode",{parentName:"h2"},"model")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Business logic of the module")),(0,r.kt)("p",null,"May contain:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The logic of creating and updating a mini-store for this slice",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the effector world: ",(0,r.kt)("inlineCode",{parentName:"em"},"createStore")," + ",(0,r.kt)("inlineCode",{parentName:"em"},"createDomain"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the redux world: ",(0,r.kt)("inlineCode",{parentName:"em"},"createSlice"))))),(0,r.kt)("li",{parentName:"ul"},"A list of events processed by the parent slice model and updating its state",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the effector world: ",(0,r.kt)("inlineCode",{parentName:"em"},"events"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the redux world: ",(0,r.kt)("inlineCode",{parentName:"em"},"actions")," + ",(0,r.kt)("inlineCode",{parentName:"em"},"dispatch"))))),(0,r.kt)("li",{parentName:"ul"},"List of asynchronous side effects, for loading data and other asynchronous operations",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the effector world: ",(0,r.kt)("inlineCode",{parentName:"em"},"effects"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the redux world: ",(0,r.kt)("inlineCode",{parentName:"em"},"thunks")," / ",(0,r.kt)("inlineCode",{parentName:"em"},"sagas")," / ",(0,r.kt)("inlineCode",{parentName:"em"},"epics"))))),(0,r.kt)("li",{parentName:"ul"},"List of selectors/contracts/hooks for using the slice state",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the effector world: ",(0,r.kt)("inlineCode",{parentName:"em"},"useStore"),", ...")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"In the redux world: ",(0,r.kt)("inlineCode",{parentName:"em"},"useSelector"),", ",(0,r.kt)("inlineCode",{parentName:"em"},"selectors")))))),(0,r.kt)("h2",{id:"lib"},(0,r.kt)("inlineCode",{parentName:"h2"},"lib")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Auxiliary libraries")),(0,r.kt)("p",null,"It usually contains a set of utilities that help writing logic and are distributed in groups, i.e. separate libraries."),(0,r.kt)("h2",{id:"api"},(0,r.kt)("inlineCode",{parentName:"h2"},"api")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Logic of interaction with the API")),(0,r.kt)("p",null,"Usually contains"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"instances for working with different external APIs"),(0,r.kt)("li",{parentName:"ul"},"methods / factories for calling specific endpoints")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"In rare cases (react-query / graphql), the queries themselves may lie near the place of use")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"But most often ",(0,r.kt)("a",{parentName:"em",href:"https://github.com/feature-sliced/documentation/discussions/66"},"recommended")," place the API segment in the 'shared' layer to reduce the number of logic entanglements"))),(0,r.kt)("p",null,"At the same time, this segment can be written manually or generated using the API scheme"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"For example, using ",(0,r.kt)("inlineCode",{parentName:"em"},"openapi-generator"),", ",(0,r.kt)("inlineCode",{parentName:"em"},"swagger-codegen")))),(0,r.kt)("h3",{id:"examples-1"},"Examples"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=**/**/api/user.ts",title:"**/**/api/user.ts"},"export class UserApi {\n    constructor(config) {...}\n    getList(params: GetListParams): Promise<User[]> {...}\n    ...\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=**/**/model/thunks.ts",title:"**/**/model/thunks.ts"},'import { userApi } from "shared/api"\n\n// API instances can be created\n// both at the place of use and in the API segment itself\n//\n// const userApi = new UserApi();\n\nexport const getUserListThunk = createAsyncThunk("...", (params) => {\n    return userApi.getList(params);\n});\n')),(0,r.kt)("h2",{id:"config"},(0,r.kt)("inlineCode",{parentName:"h2"},"config")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Application configuration module and its environment")),(0,r.kt)("p",null,"It usually contains the application configuration and methods for working with it"),(0,r.kt)("h3",{id:"examples-2"},"Examples"),(0,r.kt)("h4",{id:"using-environment-variables"},"Using environment variables"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"The implementation depends on the project and the team, here is just one of the options")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=shared/config/index.ts",title:"shared/config/index.ts"},'export const isDevEnv = NODE_ENV === "development";\nexport const OAUTH_TOKEN = getEnvVar("REACT_APP_OAUTH_TOKEN");\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=**/**/index.tsx",title:"**/**/index.tsx"},'import { OAUTH_TOKEN, isDevEnv } from "shared/config";\n\nexport const OAuthProvider = () => (\n    <OAuth\n        debug={isDevEnv}\n        token={OAUTH_TOKEN}\n        ...\n    />\n)\n')),(0,r.kt)("h2",{id:"see-also"},"See also"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"WIP:")," Over time, articles on each abstraction will appear")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/about/understanding/naming"},"Naming adaptability")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/feature-sliced/documentation/discussions/66"},"(Discussion) Where the API should be located"))))}u.isMDXComponent=!0}}]);