"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6693],{4137:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return m}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),u=p(a),m=i,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||s;return a?n.createElement(h,o(o({ref:t},d),{},{components:a})):n.createElement(h,o({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=a.length,o=new Array(s);o[0]=u;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:i,o[1]=r;for(var p=2;p<s;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},3367:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return r},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return u}});var n=a(3117),i=a(102),s=(a(7294),a(4137)),o=["components"],r={sidebar_position:2},l="Quick start",p={unversionedId:"get-started/quick-start",id:"get-started/quick-start",isDocsHomePage:!1,title:"Quick start",description:"Let's consider the application of feature-sliced on the example of TodoApp",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/get-started/quick-start.md",sourceDirName:"get-started",slug:"/get-started/quick-start",permalink:"/en/docs/get-started/quick-start",editUrl:"https://github.com/feature-sliced/documentation/edit/master/website/i18n/en/docusaurus-plugin-content-docs/current/get-started/quick-start.md",tags:[],version:"current",lastUpdatedAt:1637603050,formattedLastUpdatedAt:"11/22/2021",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"getstartedSidebar",previous:{title:"Basics",permalink:"/en/docs/get-started/basics"},next:{title:"Decomposition cheatsheet",permalink:"/en/docs/get-started/cheatsheet"}},d=[{value:"1. Preparation",id:"1-preparation",children:[{value:"1.1 Initializing the project",id:"11-initializing-the-project",children:[],level:3},{value:"1.2 Preparing the structure",id:"12-preparing-the-structure",children:[{value:"How it usually happens",id:"how-it-usually-happens",children:[],level:4},{value:"How can it be done otherwise",id:"how-can-it-be-done-otherwise",children:[],level:4},{value:"Adapting the structure to the desired view",id:"adapting-the-structure-to-the-desired-view",children:[],level:4},{value:"Layers: app",id:"layers-app",children:[],level:4}],level:3},{value:"1.3 Enabling global styles",id:"13-enabling-global-styles",children:[{value:"Install dependencies",id:"install-dependencies",children:[],level:4},{value:"Creating files for styles",id:"creating-files-for-styles",children:[{value:"For css variables",id:"for-css-variables",children:[],level:5},{value:"To normalize styles",id:"to-normalize-styles",children:[],level:5},{value:"Connecting all styles",id:"connecting-all-styles",children:[],level:5}],level:4}],level:3},{value:"1.4 Adding routing",id:"14-adding-routing",children:[{value:"Install dependencies",id:"install-dependencies-1",children:[],level:4},{value:"Add HOC to initialize the router",id:"add-hoc-to-initialize-the-router",children:[],level:4},{value:"Let&#39;s add real pages",id:"lets-add-real-pages",children:[{value:"Temporary page, only for checking the routing",id:"temporary-page-only-for-checking-the-routing",children:[],level:5},{value:"Let&#39;s form the routes",id:"lets-form-the-routes",children:[],level:5},{value:"Connecting the routing to the application",id:"connecting-the-routing-to-the-application",children:[],level:5}],level:4},{value:"Layers: app, pages",id:"layers-app-pages",children:[],level:4}],level:3},{value:"1.5 Let&#39;s connect UIKit",id:"15-lets-connect-uikit",children:[],level:3}],level:2},{value:"2. Implementing business logic",id:"2-implementing-business-logic",children:[{value:"2.1 Let&#39;s analyze the functionality",id:"21-lets-analyze-the-functionality",children:[{value:"Pages",id:"pages",children:[{value:"The usual approach",id:"the-usual-approach",children:[],level:5},{value:"Alternative approach",id:"alternative-approach",children:[],level:5}],level:4},{value:"Features",id:"features",children:[],level:4},{value:"Entities",id:"entities",children:[],level:4},{value:"Shared",id:"shared",children:[],level:4},{value:"What is the profit?",id:"what-is-the-profit",children:[],level:4}],level:3},{value:"2.2 What else is worth remembering",id:"22-what-else-is-worth-remembering",children:[{value:"Layers and responsibilities",id:"layers-and-responsibilities",children:[],level:4},{value:"Preparing modules for use",id:"preparing-modules-for-use",children:[],level:4}],level:3},{value:"2.3 Let&#39;s display the basic task list",id:"23-lets-display-the-basic-task-list",children:[{value:"(entities) Task card",id:"entities-task-card",children:[],level:4},{value:"(entities) Loading the task list",id:"entities-loading-the-task-list",children:[],level:4},{value:"(pages) Let&#39;s connect all the logic on the page",id:"pages-lets-connect-all-the-logic-on-the-page",children:[],level:4}],level:3},{value:"2.4 Adding task status switching",id:"24-adding-task-status-switching",children:[{value:"(entities) Switching the task status",id:"entities-switching-the-task-status",children:[],level:4},{value:"(features) Checkbox for the task",id:"features-checkbox-for-the-task",children:[],level:4},{value:"(pages) Embedding the checkbox in the page",id:"pages-embedding-the-checkbox-in-the-page",children:[],level:4}],level:3},{value:"2.5 Adding task filtering",id:"25-adding-task-filtering",children:[{value:"(entities) Filtering at the data level",id:"entities-filtering-at-the-data-level",children:[],level:4},{value:"(features) UI controls for filters",id:"features-ui-controls-for-filters",children:[],level:4},{value:"(pages) Implementing filtering in the page",id:"pages-implementing-filtering-in-the-page",children:[],level:4}],level:3},{value:"2.6 Task Page",id:"26-task-page",children:[{value:"(pages) The&quot;Task Card&quot; page",id:"pages-thetask-card-page",children:[],level:4}],level:3},{value:"2.7 What&#39;s next?",id:"27-whats-next",children:[{value:"Has the functionality tied to the user appeared?",id:"has-the-functionality-tied-to-the-user-appeared",children:[],level:4},{value:"Did you need to change the filtering logic?",id:"did-you-need-to-change-the-filtering-logic",children:[],level:4},{value:"Do you need to add more features to the task card, but at the same time, so that it can be used in the old way?",id:"do-you-need-to-add-more-features-to-the-task-card-but-at-the-same-time-so-that-it-can-be-used-in-the-old-way",children:[],level:4},{value:"Has a module become too complex to support?",id:"has-a-module-become-too-complex-to-support",children:[],level:4}],level:3}],level:2},{value:"Total",id:"total",children:[{value:"We have learned how to apply the methodology for basic cases",id:"we-have-learned-how-to-apply-the-methodology-for-basic-cases",children:[],level:3},{value:"We got a scalable and flexible codebase",id:"we-got-a-scalable-and-flexible-codebase",children:[],level:3},{value:"Example",id:"example",children:[],level:3}],level:2},{value:"See also",id:"see-also",children:[],level:2}],c={toc:d};function u(e){var t=e.components,r=(0,i.Z)(e,o);return(0,s.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"quick-start"},"Quick start"),(0,s.kt)("p",null,"Let's consider the application of ",(0,s.kt)("strong",{parentName:"p"},"feature-sliced")," on the example of TodoApp"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"At first, we will prepare application basely (bootstrap, routing, styles)"),(0,s.kt)("li",{parentName:"ul"},"Then we will consider - how the concepts of the methodology help ",(0,s.kt)("em",{parentName:"li"},"flexibly and effectively design business logic")," without unnecessary costs")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"There is ",(0,s.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/github/feature-sliced/examples/tree/master/todo-app"},"codesandbox-insert with the final solution"),", which can help to clarify the implementation details at the end of the article")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Stack"),": React, Effector, TypeScript, Sass, AntDesign"),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"The tutorial is designed to ",(0,s.kt)("strong",{parentName:"p"},"reveal the practical idea of the methodology itself"),". Therefore, the practices described here are largely suitable for other technological stacks of frontend projects"))),(0,s.kt)("h2",{id:"1-preparation"},"1. Preparation"),(0,s.kt)("h3",{id:"11-initializing-the-project"},"1.1 Initializing the project"),(0,s.kt)("p",null,"At the moment, there are many ways to generate and run a project template"),(0,s.kt)("p",null,"We will not focus too much on this step, but for quick initialization, you can use ",(0,s.kt)("a",{parentName:"p",href:"https://create-react-app.dev/docs/getting-started"},"CRA (for React)"),":"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cmd"},"$ npx create-react-app todo-app --template typescript\n")),(0,s.kt)("h3",{id:"12-preparing-the-structure"},"1.2 Preparing the structure"),(0,s.kt)("p",null,"We received the following blank for the project"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"\u2514\u2500\u2500 src/\n    \u251c\u2500\u2500 App.css\n    \u251c\u2500\u2500 App.test.tsx\n    \u251c\u2500\u2500 App.tsx\n    \u251c\u2500\u2500 index.css\n    \u251c\u2500\u2500 index.ts\n    \u251c\u2500\u2500 logo.svg\n    \u251c\u2500\u2500 react-app-env.d.ts\n    \u251c\u2500\u2500 reportWebVitals.ts\n    \u251c\u2500\u2500 setupTests.ts\n    \u2514\u2500\u2500 index.tsx/\n")),(0,s.kt)("h4",{id:"how-it-usually-happens"},"How it usually happens"),(0,s.kt)("p",null,"And usually most projects at this stage ",(0,s.kt)("a",{parentName:"p",href:"https://www.pluralsight.com/guides/how-to-organize-your-react-+-redux-codebase#module-theflatstructure"},"turn into something like this"),":"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"\u2514\u2500\u2500 src/\n    \u251c\u2500\u2500 api/\n    \u251c\u2500\u2500 components/\n    \u251c\u2500\u2500 containers/\n    \u251c\u2500\u2500 helpers/\n    \u251c\u2500\u2500 pages/\n    \u251c\u2500\u2500 routes/\n    \u251c\u2500\u2500 store/\n    \u251c\u2500\u2500 App.tsx\n    \u2514\u2500\u2500 index.tsx/\n")),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"They can become such immediately, or after a long development")),(0,s.kt)("p",null,"At the same time, if we look inside we will most likely find:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Highly coupled directories by nesting"),(0,s.kt)("li",{parentName:"ul"},"Strongly connected components with each other"),(0,s.kt)("li",{parentName:"ul"},"A huge number of dissimilar components / containers in their respective folders, linked thoughtlessly")),(0,s.kt)("h4",{id:"how-can-it-be-done-otherwise"},"How can it be done otherwise"),(0,s.kt)("p",null,"Anyone who has been developing frontend projects for at least a long time understands the advantages and disadvantages of this approach."),(0,s.kt)("p",null,"However, most frontend projects are still something like this, since ",(0,s.kt)("strong",{parentName:"p"},"there is no proven flexible and extensible alternative")),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"Multiply this by the free adaptations of the structure for each project, without a ban from the framework-and ",(0,s.kt)("a",{parentName:"em",href:"/docs/get-started/motivation"},'we get "projects as unique as snowflakes"'))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"The purpose of this tutorial")," is to show a different view of the usual practices in designing"),(0,s.kt)("h4",{id:"adapting-the-structure-to-the-desired-view"},"Adapting the structure to the desired view"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"\u2514\u2500\u2500 src/\n    \u251c\u2500\u2500 app/                    # Initializing application logic\n    |    \u251c\u2500\u2500 index.tsx          #    Entrypoint for connecting the application (formerly App. tsx)\n    |    \u2514\u2500\u2500 index.css          #    Global application styles\n    \u251c\u2500\u2500 pages/                  #\n    \u251c\u2500\u2500 features/               #\n    \u251c\u2500\u2500 entities/               #\n    \u251c\u2500\u2500 shared/                 #\n    \u2514\u2500\u2500 index.tsx               # Connecting and rendering the application\n")),(0,s.kt)("p",null,"At first glance the structure may seem strange, but over time you will notice that ",(0,s.kt)("strong",{parentName:"p"},"you use familiar abstractions, but in a consistent and ordered form.")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Also, we enable support for absolute imports for convenience")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=tsconfig.json",title:"tsconfig.json"},'{\n  "compilerOptions": {\n    "baseUrl": "./src",\n    // Or aliases, if it\'s more convenient\n')),(0,s.kt)("p",null,"Here's how it will help us in the future"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-diff"},'- import App from "../app"\n- import Button from "../../shared/ui/button";\n+ import App from "app"\n+ import Button from "shared/ui/button";\n')),(0,s.kt)("h4",{id:"layers-app"},"Layers: app"),(0,s.kt)("p",null,"As you can see , we have moved all the basic logic to the ",(0,s.kt)("a",{parentName:"p",href:"/docs/reference/layers/app"},(0,s.kt)("inlineCode",{parentName:"a"},"app/"))," directory"),(0,s.kt)("p",null,"It is there, according to the methodology, that all the preparatory logic should be placed:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"connecting global styles (",(0,s.kt)("inlineCode",{parentName:"li"},"/app/styles/**")," + ",(0,s.kt)("inlineCode",{parentName:"li"},"/app/index.css"),")"),(0,s.kt)("li",{parentName:"ul"},"providers and HOCs with initializing logic (",(0,s.kt)("inlineCode",{parentName:"li"},"/app/providers/**"),")")),(0,s.kt)("p",null,"For now, we will transfer all the existing logic there, and leave the other directories empty, as in the diagram above."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/index.tsx",title:"app/index.tsx"},'import "./index.css";\n\nconst App = () => {...}\n')),(0,s.kt)("h3",{id:"13-enabling-global-styles"},"1.3 Enabling global styles"),(0,s.kt)("h4",{id:"install-dependencies"},"Install dependencies"),(0,s.kt)("p",null,"In the tutorial, we install sass, but you can also take any other preprocessor that supports imports"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cmd"},"$ npm i sass\n")),(0,s.kt)("h4",{id:"creating-files-for-styles"},"Creating files for styles"),(0,s.kt)("h5",{id:"for-css-variables"},"For css variables"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-scss",metastring:"title=app/styles/vars.scss",title:"app/styles/vars.scss"},":root {\n    --color-dark: #242424;\n    --color-primary: #108ee9;\n    ...\n}\n")),(0,s.kt)("h5",{id:"to-normalize-styles"},"To normalize styles"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-scss",metastring:"title=app/styles/normalize.scss",title:"app/styles/normalize.scss"},"html {\n    scroll-behavior: smooth;\n}\n...\n")),(0,s.kt)("h5",{id:"connecting-all-styles"},"Connecting all styles"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-scss",metastring:"title=app/styles/index.scss",title:"app/styles/index.scss"},'@import "./normalize.scss";\n@import "./vars.scss";\n...\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-scss",metastring:"title=app/index.scss",title:"app/index.scss"},'@import "./styles/index.scss";\n...\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/index.tsx",title:"app/index.tsx"},'import "./index.scss"\n\nconst App = () => {...}\n')),(0,s.kt)("h3",{id:"14-adding-routing"},"1.4 Adding routing"),(0,s.kt)("h4",{id:"install-dependencies-1"},"Install dependencies"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cmd"},"$ npm i react-router react-router-dom compose-function\n$ npm i -D @types/react-router @types/react-router-dom @types/compose-function\n")),(0,s.kt)("h4",{id:"add-hoc-to-initialize-the-router"},"Add HOC to initialize the router"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/providers/with-router.tsx",title:"app/providers/with-router.tsx"},'import { Suspense } from "react";\nimport { BrowserRouter } from "react-router-dom";\n\nexport const withRouter = (component: () => React.ReactNode) => () => (\n    <BrowserRouter>\n        <Suspense fallback="Loading...">\n            {component()}\n        </Suspense>\n    </BrowserRouter>\n);\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=app/providers/index.ts",title:"app/providers/index.ts"},'import compose from "compose-function";\nimport { withRouter } from "./with-router";\n\nexport const withProviders = compose(withRouter);\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/index.tsx",title:"app/index.tsx"},'import { withProviders } from "./providers";\n...\n\nconst App = () => {...}\n\nexport default withProviders(App);\n')),(0,s.kt)("h4",{id:"lets-add-real-pages"},"Let's add real pages"),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"This is just one of the routing implementations"),(0,s.kt)("ul",{parentName:"div"},(0,s.kt)("li",{parentName:"ul"},"You can declare it declaratively or through the list of routes (+ react-router-config)"),(0,s.kt)("li",{parentName:"ul"},"You can declare it at the pages or app level")),(0,s.kt)("p",{parentName:"div"},"The methodology does not yet regulate the implementation of this logic in any way"))),(0,s.kt)("h5",{id:"temporary-page-only-for-checking-the-routing"},"Temporary page, only for checking the routing"),(0,s.kt)("p",null,"You can delete it later"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/test/index.tsx",title:"pages/test/index.tsx"},"const TestPage = () => {\n    return <div>Test Page</div>;\n};\n\nexport default TestPage;\n")),(0,s.kt)("h5",{id:"lets-form-the-routes"},"Let's form the routes"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/index.tsx",title:"pages/index.tsx"},'// Or use @loadable/component, as part of the tutorial - uncritically\nimport { lazy } from "react";\nimport { Route, Switch, Redirect } from "react-router-dom";\n\nconst TestPage = lazy(() => import("./test"));\n\nexport const Routing = () => {\n    return (\n        <Switch>\n            <Route exact path="/" component={TestPage} />\n            <Redirect to="/" />\n        </Switch>\n    );\n};\n')),(0,s.kt)("h5",{id:"connecting-the-routing-to-the-application"},"Connecting the routing to the application"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=app/index.tsx",title:"app/index.tsx"},'import { Routing } from "pages";\n\nconst App = () => (\n    // Potentially you can insert here \n    // A single header for the entire application\n    // Or do it on separate pages\n    <Routing />\n)\n...\n')),(0,s.kt)("h4",{id:"layers-app-pages"},"Layers: app, pages"),(0,s.kt)("p",null,"Here we used several layers at once:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/reference/layers/app"},(0,s.kt)("inlineCode",{parentName:"a"},"app"))," - to initialize the router ",(0,s.kt)("em",{parentName:"li"},"(HOC: withRouter)")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/reference/layers/pages"},(0,s.kt)("inlineCode",{parentName:"a"},"pages"))," - for storing page modules")),(0,s.kt)("h3",{id:"15-lets-connect-uikit"},"1.5 Let's connect UIKit"),(0,s.kt)("p",null,"To simplify the tutorial, we will use the ready-made UIKit from ",(0,s.kt)("a",{parentName:"p",href:"https://ant.design/components/overview/"},"AntDesign")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cmd"},"$ npm i antd @ant-design/icons\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=app/styles/index.scss",title:"app/styles/index.scss"},"@import 'antd/dist/antd.css';\n")),(0,s.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"But you can use ",(0,s.kt)("strong",{parentName:"p"},"any other UIKit")," or ",(0,s.kt)("strong",{parentName:"p"},"create your own")," by placing the components in ",(0,s.kt)("inlineCode",{parentName:"p"},"shared/ui")," - this is where it is recommended to place UIKit of application:"),(0,s.kt)("pre",{parentName:"div"},(0,s.kt)("code",{parentName:"pre",className:"language-ts"},'import { Checkbox } from "antd"; // ~ "shared/ui/checkbox"\nimport { Card } from "antd"; // ~ "shared/ui/card"\n')))),(0,s.kt)("h2",{id:"2-implementing-business-logic"},"2. Implementing business logic"),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"We will try to focus not on the implementation of each module, but on their sequential composition"))),(0,s.kt)("h3",{id:"21-lets-analyze-the-functionality"},"2.1 Let's analyze the functionality"),(0,s.kt)("p",null,"Before starting the code, we need to decide - ",(0,s.kt)("a",{parentName:"p",href:"/docs/concepts/needs-driven"},"what value we want to convey to the end user")),(0,s.kt)("p",null,"To do this, we decompose our functionality ",(0,s.kt)("em",{parentName:"p"},"by responsibility scopes ",(0,s.kt)("a",{parentName:"em",href:"/docs/reference/layers/overview"},"(layers)"))),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"layers-flow-themed",src:a(1637).Z})),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},(0,s.kt)("strong",{parentName:"p"},"Note:")," the diagram shows ",(0,s.kt)("em",{parentName:"p"},'an experimental layer of "Widgets"'),", which is unnecessary in the framework of the tutorial and the specification of which will be added soon")),(0,s.kt)("h4",{id:"pages"},(0,s.kt)("a",{parentName:"h4",href:"/docs/reference/layers/pages"},"Pages")),(0,s.kt)("p",null,"We will outline the basic necessary pages, and user expectations from them:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"TasksListPage"),' - the "Task List" page'),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"View the task list"),(0,s.kt)("li",{parentName:"ul"},"Go to the page of a specific task"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"Mark a specific task completed/unfulfilled")),(0,s.kt)("li",{parentName:"ul"},"Set filtering by completed / unfulfilled tasks"))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"TaskDetailsPage"),' - page "Task card"'),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"View information about the task"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"Mark a specific task as completed/unfulfilled")),(0,s.kt)("li",{parentName:"ul"},"Go back to the task list")))),(0,s.kt)("p",null,"Each of the described features is a part of the functionality"),(0,s.kt)("h5",{id:"the-usual-approach"},"The usual approach"),(0,s.kt)("p",null,"And there is a great temptation"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"or implement all the logic in the directory of each specific page."),(0,s.kt)("li",{parentName:"ul"},'or put all" possibly reused "modules in the shared folder ',(0,s.kt)("inlineCode",{parentName:"li"},"src/components")," or similar")),(0,s.kt)("p",null,"But if such a solution would be suitable for a small and short-lived project, then in real corporate development, it ",(0,s.kt)("strong",{parentName:"p"},"can put an end")," to the further development of the project, turning it into ",(0,s.kt)("strong",{parentName:"p"},'"another dense legacy"')),(0,s.kt)("p",null,"This is due to the usual conditions of the project development:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"requirements change quite often"),(0,s.kt)("li",{parentName:"ul"},"there are new circumstances"),(0,s.kt)("li",{parentName:"ul"},"the technical debt is accumulating every day and it is becoming more difficult to add new features"),(0,s.kt)("li",{parentName:"ul"},"it is necessary to scale both the project itself and its team")),(0,s.kt)("h5",{id:"alternative-approach"},"Alternative approach"),(0,s.kt)("p",null,"Even with the basic partitioning, we see that:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"there are common ",(0,s.kt)("a",{parentName:"li",href:"/docs/reference/layers/entities"},"entities")," between the pages and their display ",(0,s.kt)("em",{parentName:"li"},"(Task)")),(0,s.kt)("li",{parentName:"ul"},"there are common ",(0,s.kt)("a",{parentName:"li",href:"/docs/reference/layers/features"},"features")," ",(0,s.kt)("em",{parentName:"li"},"between the pages (Mark the task completed / unfulfilled)"))),(0,s.kt)("p",null,"Accordingly, it seems logical to continue to decompose the task, but already based on the above-mentioned features for the user."),(0,s.kt)("h4",{id:"features"},(0,s.kt)("a",{parentName:"h4",href:"/docs/reference/layers/features"},"Features")),(0,s.kt)("p",null,"Parts of functionality that bring value to the user"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"<ToggleTask />")," - (component) Mark a task as completed / unfulfilled"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"<TasksFilters/>")," - (component) Set filtering for the task list")),(0,s.kt)("h4",{id:"entities"},(0,s.kt)("a",{parentName:"h4",href:"/docs/reference/layers/entities"},"Entities")),(0,s.kt)("p",null,"Business entities on which a higher-level logic will be built"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"<TaskCard />")," - (component) Task card, with information display"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"getTasksListFx({ filters })")," - (effect) Loading the task list with parameters"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"getTaskByIdFx(taskId: number)"),"- (effect) Uploading a task by ID")),(0,s.kt)("h4",{id:"shared"},(0,s.kt)("a",{parentName:"h4",href:"/docs/reference/layers/shared"},"Shared")),(0,s.kt)("p",null,"Reused shared modules, without binding to the domain scopes"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"<Card />")," - (component) UIKit component",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"At the same time, you can either implement your own UIKit for the project, or use a ready-made one")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"getTasksList({ filters })")," - (api) Loading the task list with parameters"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"getTaskById(taskId: number)")," - (api) Loading a task by ID")),(0,s.kt)("h4",{id:"what-is-the-profit"},"What is the profit?"),(0,s.kt)("p",null,"Now all modules can be designed with ",(0,s.kt)("a",{parentName:"p",href:"/docs/concepts/low-coupling"},"low coupling")," and ",(0,s.kt)("a",{parentName:"p",href:"/docs/reference/layers/overview"},"with their own scope of responsibility"),", as well as distributed across the team without conflicts during development"),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"And most importantly, now each module serves to build a specific business value, which reduces the risks for creating ",(0,s.kt)("a",{parentName:"em",href:"/docs/concepts/needs-driven"},'"features for the sake of features"'))),(0,s.kt)("h3",{id:"22-what-else-is-worth-remembering"},"2.2 What else is worth remembering"),(0,s.kt)("h4",{id:"layers-and-responsibilities"},"Layers and responsibilities"),(0,s.kt)("p",null,"As described above, thanks to the layered structure, we can ",(0,s.kt)("strong",{parentName:"p"},"predictably distribute the complexity of the application")," according to ",(0,s.kt)("a",{parentName:"p",href:"/docs/reference/layers/overview"},"scopes of responsibility, i.e. layers"),"."),(0,s.kt)("p",null,"At the same time, a higher-level logic is built on the basis of the underlying layers:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx"},"// (shared)         => (entities)  + (features)     => (pages)\n<Card> + <Checkbox> => <TaskCard/> + <ToggleTask/>  => <TaskPage/>\n")),(0,s.kt)("h4",{id:"preparing-modules-for-use"},"Preparing modules for use"),(0,s.kt)("p",null,"Each implemented module must provide its own ",(0,s.kt)("a",{parentName:"p",href:"/docs/concepts/public-api"},"public interface")," for use:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title={layer}/foo/index.ts",title:"{layer}/foo/index.ts"},'export { FooCard, FooThumbnail, ... } from "./ui";\nexport * as fooModel from "./model"; \n')),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"If you need named namespace exports for the Public API declaration, you can look aside ",(0,s.kt)("a",{parentName:"p",href:"https://babeljs.io/docs/en/babel-plugin-proposal-export-namespace-from"},"@babel/plugin-proposal-export-namespace-from")),(0,s.kt)("p",{parentName:"div"},"Or, as an alternative, use a more detailed design"),(0,s.kt)("pre",{parentName:"div"},(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title={layer}/foo/index.ts",title:"{layer}/foo/index.ts"},'import { FooCard, FooThumbnail, ... } from "./ui";\nimport * as fooModel from "./model"; \n\nexport { FooCard, FooThumbnail, fooModel };\n')))),(0,s.kt)("h3",{id:"23-lets-display-the-basic-task-list"},"2.3 Let's display the basic task list"),(0,s.kt)("h4",{id:"entities-task-card"},"(entities) Task card"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=entities/task/ui/task-row/index.tsx",title:"entities/task/ui/task-row/index.tsx"},'import { Link } from "react-router-dom";\nimport cn from "classnames"; // we can safely use the analogy \nimport { Row } from "antd"; // ~ "shared/ui/row"\n\nexport const TaskRow = ({ data, titleHref }: TaskRowProps) => {\n    return (\n        <Row className={cn(styles.root, { [styles.completed]: data.completed })}>\n            {titleHref ? <Link to={titleHref}>{data.title}</Link> : data.title}\n        </Row>\n    )\n}\n')),(0,s.kt)("h4",{id:"entities-loading-the-task-list"},"(entities) Loading the task list"),(0,s.kt)("p",null,"You can split it by the type of entity, or store everything in the duck-modular style"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"For more information about the implementation of the API according to the tutorial, see ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/feature-sliced/examples/tree/master/todo-app/src/shared/api"},"here"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=entities/task/model/index.ts",title:"entities/task/model/index.ts"},'import { createStore, combine, createEffect, createEvent } from "effector";\nimport { useStore } from "effector-react";\n\nimport { typicodeApi } from "shared/api";\nimport type { Task } from "shared/api";\n\n// Each effect can also have its own additional. processing\nconst getTasksListFx = createEffect((params?: typicodeApi.tasks.GetTasksListParams) => {\n  // There may also be an additional processing the effect\n  return typicodeApi.tasks.getTasksList(params);\n});\n\n// Can also be stored in a normalized form\nexport const $tasks = createStore<Task[]>([])\n  .on(getTasksListFx.doneData, (_, payload) => ...)\n\nexport const $tasksList = combine($tasks, (tasks) => Object.values(tasks));\n// You can also add other things like `isEmpty`, `isLoading`, ...\n')),(0,s.kt)("h4",{id:"pages-lets-connect-all-the-logic-on-the-page"},"(pages) Let's connect all the logic on the page"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/tasks-list/index.tsx",title:"pages/tasks-list/index.tsx"},'import { useEffect } from "react";\n// If you feel confident with @effector/reflect - can use it \n// Within the quick-start non-critical \nimport { useStore } from "effector";\nimport { Layout, Row, Col, Typography, Spin, Empty } from "antd"; // ~ "shared/ui/{...}"\n\nimport { TaskRow, taskModel } from "entities/task";\nimport styles from "./styles.module.scss";\n\nconst TasksListPage = () => {\n  const tasks = useStore(taskModel.$tasksList);\n  const isLoading = useStore(taskModel.$tasksListLoading);\n  const isEmpty = useStore(taskModel.$tasksListEmpty);\n\n  /**\n   * Requesting data when loading the page\n   * @remark is a bad practice in the effector world and is presented here-just for a visual demonstration\n   * It is better to fetch via event.pageMounted or reflect\n   */\n  useEffect(() => taskModel.effects.getTasksListFx(), []);\n\n  return (\n    <Layout className={styles.root}>\n      <Layout.Toolbar className={styles.toolbar}>\n        <Row justify="center">\n          <Typography.Title level={1}>Tasks List</Typography.Title>\n        </Row>\n        {/* TODO: TasksFilters */}\n      </Layout.Toolbar>\n      <Layout.Content className={styles.content}>\n        <Row gutter={[0, 20]} justify="center">\n          {isLoading && <Spin size="large" />}\n          {!isLoading && tasks.map((task) => (\n            <Col key={task.id} span={24}>\n              <TaskRow\n                data={task}\n                titleHref={`/${task.id}`}\n                // TODO: ToggleTaskCheckbox\n              />\n            </Col>\n          ))}\n          {!isLoading && isEmpty && <Empty description="No tasks found" />}\n        </Row>\n      </Layout.Content>\n    </Layout>\n  );\n};\n')),(0,s.kt)("h3",{id:"24-adding-task-status-switching"},"2.4 Adding task status switching"),(0,s.kt)("h4",{id:"entities-switching-the-task-status"},"(entities) Switching the task status"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=entities/task/model/index.ts",title:"entities/task/model/index.ts"},'export const toggleTask = createEvent<number>();\n\nexport const $tasks = createStore<Task[]>(...)\n  ...\n  .on(toggleTask, (state, taskId) => produce(state, draft => {\n    const task = draft[taskId];\n    task.completed = !task.completed;\n    console.log(1, { taskId, state, draft: draft[taskId].completed });\n  }))\n\n\n// We make a hook to get involved in updates react\nexport const useTask = (taskId: number): import("shared/api").Task | undefined => {\n  return useStore($tasks)[taskId];\n};\n')),(0,s.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"For a more convenient public API of models, you can export selectors/hooks/events, etc. as separate objects."),(0,s.kt)("p",{parentName:"div"},(0,s.kt)("strong",{parentName:"p"},"But the main thing")," is that this does not undermine ",(0,s.kt)("a",{parentName:"p",href:"/docs/concepts/public-api"},"the anti-fragility")," of the module"),(0,s.kt)("pre",{parentName:"div"},(0,s.kt)("code",{parentName:"pre",className:"language-ts"},"export const events = { toggleTask, setQueryConfig };\nexport const effects = { getTaskByIdFx, getTasksListFx };\nexport const selectors = { useTask };\n")),(0,s.kt)("pre",{parentName:"div"},(0,s.kt)("code",{parentName:"pre",className:"language-ts"},"const task = taskModel.selectors.useTask(taskId);\ntaskModel.events.toggleTask(taskId)\n")))),(0,s.kt)("h4",{id:"features-checkbox-for-the-task"},"(features) Checkbox for the task"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=features/toggle-task/ui.tsx",title:"features/toggle-task/ui.tsx"},'import { Checkbox } from "antd"; // ~ "shared/ui/checkbox"\nimport { taskModel } from "entities/task";\n\n// resolve / unresolve\nexport const ToggleTask = ({ taskId }: ToggleTaskProps) => {\n    const task = taskModel.useTask(taskId);\n    if (!task) return null;\n\n    return (\n        <Checkbox \n            onClick={() => taskModel.toggleTask(taskId)} \n            checked={task.completed}\n        />\n    )\n}\n')),(0,s.kt)("h4",{id:"pages-embedding-the-checkbox-in-the-page"},"(pages) Embedding the checkbox in the page"),(0,s.kt)("p",null,"What is noteworthy is that the task card does not know at all about the page where it is used, nor about what action buttons can be inserted into it (the same can be said about the feature itself)"),(0,s.kt)("p",null,"This approach allows you to simultaneously ",(0,s.kt)("strong",{parentName:"p"},"competently share responsibility")," and ",(0,s.kt)("strong",{parentName:"p"},"flexibly reuse logic during implementation")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/tasks-list/index.tsx",title:"pages/tasks-list/index.tsx"},'import { ToggleTask } from "features/toggle-task";\nimport { TaskRow, taskModel } from "entities/task";\n...\n<Col key={task.id} span={24}>\n      <TaskRow\n        ...\n        before={<ToggleTask taskId={task.id} withStatus={false} />}\n      />\n</Col>\n')),(0,s.kt)("h3",{id:"25-adding-task-filtering"},"2.5 Adding task filtering"),(0,s.kt)("h4",{id:"entities-filtering-at-the-data-level"},"(entities) Filtering at the data level"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=entities/task/model/index.ts",title:"entities/task/model/index.ts"},"export type QueryConfig = { completed?: boolean };\n\nconst setQueryConfig = createEvent<QueryConfig>();\n\n// Can be moved to a separate directory (for storing multiple models)\nexport const $queryConfig = createStore<QueryConfig>({})\n  .on(setQueryConfig, (_, payload) => payload)\n\n/**\n * Filtered Tasks\n * @remark Can be handled at the effects level - but then you need to connect additional logic to the store\n * > For example, hide / show the task at the `toggleTask` event\n */\nexport const $tasksFiltered = combine(\n  $tasksList,\n  $queryConfig,\n  (tasksList, config) => {\n    return tasksList.filter(task => (\n      config.completed === undefined ||\n      task.completed === config.completed\n  ))},\n);\n")),(0,s.kt)("h4",{id:"features-ui-controls-for-filters"},"(features) UI controls for filters"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=features/tasks-filters/ui.tsx",title:"features/tasks-filters/ui.tsx"},'// If you feel confident with @effector/reflect, you can immediately use it\n// As part of quick-start uncritically\nimport { useStore } from "effector";\nimport { Radio } from "antd"; // ~ "shared/ui/radio"\n\nimport { taskModel } from "entities/task";\nimport { filtersList, getFilterById, DEFAULT_FILTER } from "./config";\n\nexport const const TasksFilters = () => {\n  const isLoading = useStore($tasksListLoading);\n\n  return (\n    <Radio.Group defaultValue={DEFAULT_FILTER} buttonStyle="solid">\n      {filtersList.map(({ title, id }) => (\n        <Radio.Button\n          key={id}\n          onClick={() => taskModel.setQueryConfig(getFilterById(id).config)}\n          value={id}\n          disabled={isLoading}\n        >\n          {title}\n        </Radio.Button>\n      ))}\n    </Radio.Group>\n  );\n};\n')),(0,s.kt)("h4",{id:"pages-implementing-filtering-in-the-page"},"(pages) Implementing filtering in the page"),(0,s.kt)("p",null,"And we implemented the logic again, without asking too many questions:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"And where to put the filtering logic?"),(0,s.kt)("li",{parentName:"ul"},"Can these filters be reused in the future?"),(0,s.kt)("li",{parentName:"ul"},"Can filters know about the page context?")),(0,s.kt)("p",null,"We just divided the logic according to the scopes of responsibility (layers)"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/tasks-list/index.tsx",title:"pages/tasks-list/index.tsx"},'import { TasksFilters } from "features/tasks-filters";\n...\n<Layout.Toolbar className={styles.toolbar}>\n    ...\n    <Row justify="center">\n        <TasksFilters />\n    </Row>\n</Layout.Toolbar>\n')),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},(0,s.kt)("strong",{parentName:"p"},'At the current stage, such a division may seem superfluous - "Why not put everything at once at the page / feature level"?')),(0,s.kt)("p",{parentName:"div"},"But then let's try to ask questions ourselves:"),(0,s.kt)("ul",{parentName:"div"},(0,s.kt)("li",{parentName:"ul"},"Where are the guarantees that the complexity of the page will not increase in the future so much that all aspects of logic will be strongly intertwined? How can I add new functionality at no extra cost?"),(0,s.kt)("li",{parentName:"ul"},"Where are the guarantees that a new person who has joined the team (or even you, if you leave the project for six months) will understand what is happening here?"),(0,s.kt)("li",{parentName:"ul"},"How to build logic so as not to disrupt the data flow / reactivity with other features?"),(0,s.kt)("li",{parentName:"ul"},"What if this filtering logic is so strongly attached to the context of the page that it will be impossible to use it on other pages?")),(0,s.kt)("p",{parentName:"div"},"This is why we ",(0,s.kt)("strong",{parentName:"p"},"divide the responsibility")," so that each layer is engaged in only one task, and so that each of the developers understands this"))),(0,s.kt)("h3",{id:"26-task-page"},"2.6 Task Page"),(0,s.kt)("p",null,"We implement the task page in the same way:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"We highlight the shared logic"),(0,s.kt)("li",{parentName:"ul"},"We highlight the entities logic"),(0,s.kt)("li",{parentName:"ul"},"We highlight the features logic"),(0,s.kt)("li",{parentName:"ul"},"We highlight the pages logic")),(0,s.kt)("h4",{id:"pages-thetask-card-page"},'(pages) The"Task Card" page'),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=pages/task-details/index.tsx",title:"pages/task-details/index.tsx"},'import { ToggleTask } from "features/toggle-task";\nimport { TaskCard, taskModel } from "entities/task";\nimport { Layout, Button } from "antd"; // ~ "shared/ui/{...}"\nimport styles from "./styles.module.scss";\n\nconst TaskDetailsPage = (props: Props) => {\n    const taskId = Number(props.match?.params.taskId);\n    const task = taskModel.useTask(taskId);\n    const isLoading = useStore(taskModel.$taskDetailsLoading);\n\n  /**\n   * Requesting data on the task\n   * @remark is a bad practice in the effector world and is presented here-just for a visual demonstration\n   * It is better to fetch via event.pageMounted or reflect\n   */\n    useEffect(() => taskModel.getTaskByIdFx({ taskId }), [taskId]);\n\n    // You can transfer part of the logic to entity/task/card (as a container)\n    if (!task && !isLoading) {\n        return ...\n    }\n\n    return (\n        <Layout className={styles.root}>\n            <Layout.Content className={styles.content}>\n                <TaskCard\n                    data={task}\n                    size="default"\n                    loading={isLoading}\n                    className={styles.card}\n                    bodyStyle={{ height: 400 }}\n                    extra={<Link to="/">Back to TasksList</Link>}\n                    actions={[\n                        <ToggleTask key="toggle" taskId={taskId} />\n                    ]}\n                />\n            </Layout.Content>\n        </Layout>\n    )\n};\n')),(0,s.kt)("h3",{id:"27-whats-next"},"2.7 What's next?"),(0,s.kt)("p",null,"And then new tasks arrive, new requirements are identified"),(0,s.kt)("p",null,"At the same time, the old code base does not require significant rework"),(0,s.kt)("h4",{id:"has-the-functionality-tied-to-the-user-appeared"},"Has the functionality tied to the user appeared?"),(0,s.kt)("p",null,"=> Adding ",(0,s.kt)("inlineCode",{parentName:"p"},"entities/user")),(0,s.kt)("h4",{id:"did-you-need-to-change-the-filtering-logic"},"Did you need to change the filtering logic?"),(0,s.kt)("p",null,"=> Changing the processing at the ",(0,s.kt)("inlineCode",{parentName:"p"},"entities")," or ",(0,s.kt)("inlineCode",{parentName:"p"},"pages")," level, depending on the scale"),(0,s.kt)("h4",{id:"do-you-need-to-add-more-features-to-the-task-card-but-at-the-same-time-so-that-it-can-be-used-in-the-old-way"},"Do you need to add more features to the task card, but at the same time, so that it can be used in the old way?"),(0,s.kt)("p",null,"=> Add features and insert them into the card only on the desired ",(0,s.kt)("strong",{parentName:"p"},"page")),(0,s.kt)("h4",{id:"has-a-module-become-too-complex-to-support"},"Has a module become too complex to support?"),(0,s.kt)("p",null," => Thanks to the embedded architecture, we can only factor this module in isolation-without implicit side effects for others ",(0,s.kt)("a",{parentName:"p",href:"https://youtu.be/BWAeYuWFHhs?t=1625"},"(and even rewrite it from scratch)")),(0,s.kt)("h2",{id:"total"},"Total"),(0,s.kt)("h3",{id:"we-have-learned-how-to-apply-the-methodology-for-basic-cases"},"We have learned how to apply the methodology for basic cases"),(0,s.kt)("p",null,"Obviously, the world is much more complicated, but now we have already caught on to some controversial points and resolved them in such a way that the project remains supported and extensible."),(0,s.kt)("h3",{id:"we-got-a-scalable-and-flexible-codebase"},"We got a scalable and flexible codebase"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Reused and expandable modules"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"shared, features, entities")))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Uniform and predictable distribution of logic"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"Since the composition goes in the same direction (the overlying layers use the underlying ones) , we can predictably track and modify it without fear of unforeseen consequences")))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"The structure of the application, which tells about the business logic for itself"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"What pages are there?",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"TasksList"),", ",(0,s.kt)("inlineCode",{parentName:"li"},"TaskDetails")))),(0,s.kt)("li",{parentName:"ul"},"What features are there? What can the user do?",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"ToggleTask")," ",(0,s.kt)("inlineCode",{parentName:"li"},"TasksFilters")))),(0,s.kt)("li",{parentName:"ul"},"What are the business entities? What is the work being done with?",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"Task (TaskCard, ...)")))),(0,s.kt)("li",{parentName:"ul"},"What can be reused from the auxiliary?",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"UIKit (Card, ...)")," ",(0,s.kt)("inlineCode",{parentName:"li"},"API (tasksApi)"))))))),(0,s.kt)("h3",{id:"example"},"Example"),(0,s.kt)("p",null,"Below in ",(0,s.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/github/feature-sliced/examples/tree/master/todo-app"},"Codesandbox")," is an example of the resulting TodoApp, where you can study in detail the final structure of the application"),(0,s.kt)("iframe",{class:"codesandbox",src:"https://codesandbox.io/embed/github/feature-sliced/examples/tree/master/todo-app?autoresize=1&fontsize=14&hidenavigation=1&theme=dark&codemirror=1",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}),(0,s.kt)("h2",{id:"see-also"},"See also"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://www.pluralsight.com/guides/how-to-organize-your-react-+-redux-codebase"},"(Overview) How to Organize Your React + Redux Codebase"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Analysis of several approaches to structuring React projects"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/guides"},"Guides and examples of the methodology application (+ Migration from v1)")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/concepts/app-splitting"},"About splitting the application")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/docs/reference"},"Reference material on the methodology"))))}u.isMDXComponent=!0},1637:function(e,t,a){t.Z=a.p+"assets/images/layers_flow-88496fd4047ede3ddbdbd73d4a46ddae.png"}}]);